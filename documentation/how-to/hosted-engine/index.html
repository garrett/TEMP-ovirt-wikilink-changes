<!DOCTYPE html>
<!--[if lt IE 7]> <html class="no-js lt-ie10 lt-ie9 lt-ie8 lt-ie7" lang="en-us"> <![endif]-->
<!--[if IE 7]> <html class="no-js lt-ie10 lt-ie9 lt-ie8" lang="en-us"> <![endif]-->
<!--[if IE 8]> <html class="no-js lt-ie10 lt-ie9" lang="en-us"> <![endif]-->
<!--[if IE 9]> <html class="no-js lt-ie10 lt-ie9" lang="en-us"> <![endif]-->
<!--[if lt IE 10]> <html class="no-js lt-ie10" lang="en-us"> <![endif]-->
<!--[if !IE]> > <![endif]-->
<html class='no-js' lang='en'>
<!-- <![endif] -->
<head>
<title>
Hosted Engine Howto &mdash;
oVirt
</title>
<meta charset='utf-8'>
<meta content='' name='description'>
<meta content='' name='author'>
<meta content='initial-scale=1.0,user-scalable=no,maximum-scale=1,width=device-width' name='viewport'>

<link href='/images/favicon.ico' rel='shortcut icon'>
<link href='/images/apple-touch-icon-precomposed.png' rel='apple-touch-icon-precomposed'>
<link href='/images/apple-touch-icon-57x57-precomposed.png' rel='apple-touch-icon-precomposed' sizes='57x57'>
<link href='/images/apple-touch-icon-72x72-precomposed.png' rel='apple-touch-icon-precomposed' sizes='72x72'>
<link href='/images/apple-touch-icon-114x114-precomposed.png' rel='apple-touch-icon-precomposed' sizes='114x114'>
<link href="/stylesheets/application.css" rel="stylesheet" type="text/css" />
<link href="/stylesheets/print.css" rel="stylesheet" type="text/css" media="print" />
</head>
<body class=' source-md'>
<header class='masthead hidden-print' id='branding' role='banner'>
<section class='hgroup'>
<h1>
<a href="/"><img id="logo" class="logo is-svg" alt="oVirt" src="/images/logo.svg" />
</a></h1>
</section>
<div id='access'>
<nav role='navigation'>
<ul class='nav nav-pills'>
<li class='nav-link-home' role='menuitem'>
<a href='/'>Home</a>
</li>

<li class='nav-link-blog' role='menuitem'>
<a href='/blog/'>Blog</a>
</li>

<li class='nav-link-download' role='menuitem'>
<a href='/download/'>Download</a>
</li>

<li class='nav-link-documentation' role='menuitem'>
<a href='/documentation/'>Documentation</a>
</li>

<li class='nav-link-develop' role='menuitem'>
<a href='/develop/'>Develop</a>
</li>

<li class='nav-link-community' role='menuitem'>
<a href='/community/'>Community</a>
</li>

<li class='nav-link-search' role='menuitem'>
<a href='/search/'>Search</a>
</li>

</ul>
</nav>

</div>
</header>

<section class='page-wrap' id='page-wrap'>
<section class='page' id='page'>
<ul class='breadcrumb'>
<li><a href="/documentation/">Documentation</a></li>
<li><a href="/documentation/how-to/">How-to</a></li>
<li class='active'>Hosted Engine Howto</li>
</ul>

<section class='container content' id='content'>
<div class='alert alert-warning'>
<div class='pull-right'>
<a>Hover for more info</a>
</div>
<div class='frontmatter-metadata'>
<table class='metadata'>
<caption>Frontmatter Metadata</caption>
<tr>
<th>title</th>
<td>Hosted Engine Howto</td>
</tr>
<tr>
<th>category</th>
<td>howto</td>
</tr>
<tr>
<th>authors</th>
<td>aburden, alukiano, bobdrad, didi, doron, jmoskovc, msivak, rstory, sandrobonazzola, stirabos</td>
</tr>
<tr>
<th>wiki_category</th>
<td>SLA</td>
</tr>
<tr>
<th>wiki_title</th>
<td>Hosted Engine Howto</td>
</tr>
<tr>
<th>wiki_revision_count</th>
<td>34</td>
</tr>
<tr>
<th>wiki_last_updated</th>
<td>2015-11-23</td>
</tr>
</table>
</div>
Original Wiki page:
<a href='http://old.ovirt.org/Hosted_Engine_Howto' target='_blank'>
Hosted Engine Howto
</a>
</div>

<!--[if lt IE 7]>
<p class="chromeframe">You are using an outdated browser.
<a href="http://browsehappy.com/">Upgrade your browser today</a> or
<a href="http://www.google.com/chromeframe/?redirect=true">install Google Chrome Frame</a> to better experience this site.</p>
<![endif]-->
<h3 id="hosted-engine-howto">Hosted Engine Howto</h3>

<h3 id="summary">Summary</h3>

<p>This wiki provides the basic operational information needed to install, upgrade and maintain the oVirt hosted engine.</p>

<h3 id="contacts"><strong>Contacts</strong></h3>

<p>Feature Owners:
Sean Cohen <a href="&#109;&#097;&#105;&#108;&#116;&#111;:&#115;&#099;&#111;&#104;&#101;&#110;&#064;&#114;&#101;&#100;&#104;&#097;&#116;&#046;&#099;&#111;&#109;">&#115;&#099;&#111;&#104;&#101;&#110;&#064;&#114;&#101;&#100;&#104;&#097;&#116;&#046;&#099;&#111;&#109;</a>, Doron Fediuck <a href="&#109;&#097;&#105;&#108;&#116;&#111;:&#100;&#111;&#114;&#111;&#110;&#064;&#114;&#101;&#100;&#104;&#097;&#116;&#046;&#099;&#111;&#109;">&#100;&#111;&#114;&#111;&#110;&#064;&#114;&#101;&#100;&#104;&#097;&#116;&#046;&#099;&#111;&#109;</a>
Setup Component owners:
Sandro Bonazzola <a href="&#109;&#097;&#105;&#108;&#116;&#111;:&#115;&#098;&#111;&#110;&#097;&#122;&#122;&#111;&#064;&#114;&#101;&#100;&#104;&#097;&#116;&#046;&#099;&#111;&#109;">&#115;&#098;&#111;&#110;&#097;&#122;&#122;&#111;&#064;&#114;&#101;&#100;&#104;&#097;&#116;&#046;&#099;&#111;&#109;</a>, Yedidyah Bar David <a href="&#109;&#097;&#105;&#108;&#116;&#111;:&#100;&#105;&#100;&#105;&#064;&#114;&#101;&#100;&#104;&#097;&#116;&#046;&#099;&#111;&#109;">&#100;&#105;&#100;&#105;&#064;&#114;&#101;&#100;&#104;&#097;&#116;&#046;&#099;&#111;&#109;</a>
HA Component owners:
Greg Padgett <a href="&#109;&#097;&#105;&#108;&#116;&#111;:&#103;&#112;&#097;&#100;&#103;&#101;&#116;&#116;&#064;&#114;&#101;&#100;&#104;&#097;&#116;&#046;&#099;&#111;&#109;">&#103;&#112;&#097;&#100;&#103;&#101;&#116;&#116;&#064;&#114;&#101;&#100;&#104;&#097;&#116;&#046;&#099;&#111;&#109;</a>, Martin Sivak <a href="&#109;&#097;&#105;&#108;&#116;&#111;:&#109;&#115;&#105;&#118;&#097;&#107;&#064;&#114;&#101;&#100;&#104;&#097;&#116;&#046;&#099;&#111;&#109;">&#109;&#115;&#105;&#118;&#097;&#107;&#064;&#114;&#101;&#100;&#104;&#097;&#116;&#046;&#099;&#111;&#109;</a></p>

<h3 id="requirements"><strong>Requirements</strong></h3>

<ul>
  <li>Two hypervisors (hosts)</li>
  <li>NFS-based shared storage (since 3.4.0) or <a href="Feature/Self_Hosted_Engine_iSCSI_Support">iSCSI storage</a> (since 3.5.0 beta)</li>
  <li>Access to the oVirt repository</li>
</ul>

<h3 id="fresh-install"><strong>Fresh Install</strong></h3>

<p>Assuming you're using ovirt RPMs, you should start with install and deploy:</p>

<pre class="highlight plaintext"><code>     # yum install ovirt-hosted-engine-setup&#x000A;     # hosted-engine --deploy&#x000A;</code></pre>

<p>During the deployment you'll be asked for input on host name, storage path and other relevant information. The installer will configure the system and run an empty VM. Access the VM and install an OS:</p>

<pre class="highlight plaintext"><code>     [ INFO  ] Creating VM&#x000A;             ...&#x000A;             ...&#x000A;             Please install the OS on the VM.&#x000A;             When the installation is completed reboot or shutdown the VM: the system will wait until then&#x000A;             Has the OS installation been completed successfully?&#x000A;</code></pre>

<p>After completing the OS installation on the VM, return to the host and continue. The installer on the host will sync with the VM and ask for the engine to be installed on the new VM:</p>

<pre class="highlight plaintext"><code>    [ INFO  ] Creating VM&#x000A;             ...&#x000A;             ...&#x000A;             Please install the engine in the VM, hit enter when finished.&#x000A;</code></pre>

<p>On the VM:</p>

<pre class="highlight plaintext"><code>     # yum install ovirt-engine&#x000A;     # engine-setup&#x000A;</code></pre>

<p>When the engine-setup has completed on the VM, return to the host and complete the configuration. Your hosted engine VM is up and running!</p>

<p><strong>Notes:</strong></p>

<ul>
  <li>Remember to setup the same hostname you specified as FQDN during deploy while you're setting up the engine on the VM.</li>
  <li>Although hosted-engine and engine-setup use different wording for the admin password ("'admin@internal' user password" vs "Engine admin password"), they are asking for the same thing. If you enter different passwords, the hosted-engine setup will fail.</li>
  <li>
    <p>If you want to install ovirt-engine-dwh and ovirt-engine-reports, or update the engine after the deployment is completed, remember that you need to set the system in global maintenance using
    # hosted-engine –set-maintenance –mode=global</p>

    <p>because the engine service must be stopped during setup / upgrade operations.</p>
  </li>
</ul>

<h4 id="restarting-from-a-partially-deployed-system"><strong>Restarting from a partially deployed system</strong></h4>

<p>If, for any reason, the deployment process breaks before its end, you can try to continue from where it got interrupted without the need to restart from scratch.</p>

<ul>
  <li>
    <p>Closing up, hosted-engine –deploy always generates an answerfile. You could simply try restart the deployment process with that answerfile:</p>

    <p>hosted-engine –deploy –config-append=/var/lib/ovirt-hosted-engine-setup/answers/answers-20150402165233.conf</p>
  </li>
  <li>it should start the VM from CD-ROM using the same storage device for it, but if you have already installed the OS you could simply poweroff it and select: (1) Continue setup - VM installation is complete</li>
  <li>at that point it should boot the previously engine VM from the storage device and you are ready to conclude it</li>
  <li>if this doesn't work you have to cleanup the storage device and restart from scratch</li>
</ul>

<h3 id="migrate-existing-setup-to-a-vm"><strong>Migrate existing setup to a VM</strong></h3>

<p>Moving an existing setup into a VM is similar to a fresh install, but instead of running a fresh engine-setup inside the VM, we restore there a backup of the existing engine. For full details see <a href="/develop/developer-guide/engine/migrate-to-hosted-engine/">Migrate_to_Hosted_Engine</a></p>

<h3 id="installing-additional-nodes"><strong>Installing additional nodes</strong></h3>

<p>Here is an example of a deployment on an additional host:</p>

<pre class="highlight plaintext"><code>     # yum install ovirt-hosted-engine-setup&#x000A;     # hosted-engine --deploy&#x000A;</code></pre>

<p>Once storage path is given, the installer will identify this is an additional host, and will change the flow accordingly:</p>

<pre class="highlight plaintext"><code>     The specified storage location already contains a data domain. Is this an additional host setup (Yes, No)[Yes]? yes&#x000A;     [ INFO  ] Installing on additional host&#x000A;             Please specify the Host ID [Must be integer, default: 2]:&#x000A;</code></pre>

<p>As with the first node, this will take you to the process completion.</p>

<p><strong>Notes</strong></p>

<ul>
  <li>Remember to use the same storage path you used on first host.</li>
  <li>There is a bug in 3.5 when adding a host to a cluster which was initially 3.4. A workaround is to manually edit the answer file on the existing hosts prior to adding a host. See <a href="https://bugzilla.redhat.com/show_bug.cgi?id=1308962">BZ 1308962</a>.</li>
</ul>

<h3 id="migrate-hosts-from-el6-to-el7"><strong>Migrate hosts from el6 to el7</strong></h3>

<p>In 3.6, el6 is not supported anymore for hosted-engine hosts. Existing 3.5 el6 hosts should be first migrated to el7, then upgraded to 3.6. More details in <a href="hosted-engine-host-OS-upgrade">Hosted Engine host operating system upgrade Howto</a>.</p>

<h3 id="maintaining-the-setup"><strong>Maintaining the setup</strong></h3>

<p>The HA services have two maintenance types for different tasks.</p>

<h4 id="global-maintenance"><strong>Global maintenance</strong></h4>

<p>Main use is to allow the administrator to start/stop/modify the engine VM without any worry of interference from the HA agents.
In order to maintain the engine VM, use:</p>

<pre class="highlight plaintext"><code>     # hosted-engine --set-maintenance --mode=global&#x000A;</code></pre>

<p>To resume HA functionality, use:</p>

<pre class="highlight plaintext"><code>     # hosted-engine --set-maintenance --mode=none&#x000A;</code></pre>

<h4 id="local-maintenance"><strong>Local maintenance</strong></h4>

<p>Main use is to allow the administrator to maintain one or more hosts. Note that if you have only 2 nodes and one is in maintenance,
there is only one host available to run the engine VM. The way to maintain a host is by using:</p>

<pre class="highlight plaintext"><code>     # hosted-engine --set-maintenance --mode=local&#x000A;</code></pre>

<p>To resume HA functionality, use:</p>

<pre class="highlight plaintext"><code>     # hosted-engine --set-maintenance --mode=none&#x000A;</code></pre>

<h3 id="upgrade-hosted-engine"><strong>Upgrade Hosted Engine</strong></h3>

<p>Assuming you have already deployed Hosted Engine on your hosts and running the Hosted Engine VM, having the same oVirt version both on hosts and Hosted Engine VM.</p>

<ol>
  <li>Set hosted engine maintenance mode to global (now ha agent stop monitoring engine-vm, you can see above how to activate it)</li>
  <li>Access to engine-vm and upgrade oVirt to latest version using the same procedure used for non hosted engine setups.</li>
  <li>Select one of the hosted-engine nodes (hypervisors) and put it into maintenance mode from the engine. Note that the host must be in maintenance to allow upgrade to run.</li>
  <li>Upgrade that host with new packages (changes repository to latest version and run yum update -y) on this stage may appear vdsm-tool exception <a href="https://bugzilla.redhat.com/show_bug.cgi?id=1088805">https://bugzilla.redhat.com/show_bug.cgi?id=1088805</a></li>
  <li>Restart vdsmd (# service vdsmd restart)</li>
  <li>Restart ha-agent and broker services (# systemctl restart ovirt-ha-broker &amp;&amp; systemctl restart ovirt-ha-agent)</li>
  <li>Exit the global maintenance mode: in a few minutes the engine VM should migrate to the fresh upgraded host cause it will get an higher score</li>
  <li>When the migration has been completed re-enter into global maintenance mode</li>
  <li>Repeat step 3-6 for all the other hosted-engine hosts</li>
  <li>Enter for example via UI to engine and change 'Default' cluster (where all your hosted hosts seats) compatibility version to current version (for example 3.6 and activate your hosts (to get features of the new version)</li>
  <li>Change hosted-engine maintenance to none, starting from 3.4 you can do it via UI(right click on engine vm, and 'Disable Global HA Maintenance Mode')</li>
</ol>

<h3 id="hosted-engine-backup-and-restore"><strong>Hosted Engine Backup and Restore</strong></h3>

<p>Please refer to <a href="/documentation/admin-guide/hosted-engine-backup-and-restore/">oVirt Hosted Engine Backup and Restore</a> guide</p>

<h3 id="lockspace-corrupted-recovery-procedure"><strong>Lockspace corrupted recovery procedure</strong></h3>

<p>If you end up with corrupted sanlock lockspace due to power outage, hw failure or so, you can fix it using the following procedure:</p>

<ol>
  <li>Move HE to global maintenance</li>
  <li>Stop all HE agents on all hosts (keep the local broker running)</li>
  <li>Run hosted-engine –reinitialize-lockspace from the host with running broker</li>
</ol>

<p>You might need to use –force if something is still running, corrupted or did not report proper shutdown. But it should not be necessary for the "best" case of shutting everything down properly before the reinitialize command is issued.</p>

<h3 id="remove-old-host-from-the-metadata-whiteboard"><strong>Remove old host from the metadata whiteboard</strong></h3>

<p>It is possible to remove an old host from the hosted-engine –vm-status report by using the hosted-engine –clean-metadata command. The agent has to be stopped first. You can force cleaning of a specific ID In the case when the host does not exist anymore by adding –host-id=<id> argument.</id></p>

<h3 id="metadata-too-new-recovery-procedure"><strong>Metadata too new recovery procedure</strong></h3>

<p>It is possible to encounter an error like <code>Metadata version 2 from host 52 too new for this agent (highest compatible version: 1)</code> when using a block storage (iSCSI, FC, GlusterFS) for the hosted engine storage domain.</p>

<p>It usually means the metadata partition was not cleaned up properly by setup and contains some garbage that the hosted engine metadata parser tries to interpret as valid metadata.</p>

<p>The cleanup procedure requires the following steps to be done first:</p>

<ol>
  <li>
    <p>Put the hosted engine to global maintenance using</p>

<pre class="highlight plaintext"><code># hosted-engine --set-maintenance --mode=global&#x000A;</code></pre>
  </li>
  <li>
    <p>Stop the hosted engine services on ALL hosts</p>

<pre class="highlight plaintext"><code># systemctl stop ovirt-ha-agent ovirt-ha-broker&#x000A;</code></pre>
  </li>
</ol>

<p>The next step is to identify the proper metadata file that needs cleaning up. You can find it using:</p>

<pre class="highlight plaintext"><code># find /rhev -name hosted-engine.metadata&#x000A;</code></pre>

<p>And the actual cleanup command is essentially a rewrite of all contents with zeros. Be EXTRA CAREFUL with the following command as it is destructive:</p>

<pre class="highlight plaintext"><code># dd if=/dev/zero of=/path/to/hosted_engine.metadata bs=1M&#x000A;</code></pre>

<p>You can start the hosted engine services again and leave the global maintenance now.</p>

<pre class="highlight plaintext"><code># systemctl start ovirt-ha-agent ovirt-ha-broker&#x000A;# hosted-engine --set-maintenance --mode=none&#x000A;</code></pre>

<h3 id="more-info"><strong>More info</strong></h3>

<p>Additional information is available in the feature page <a href="/develop/release-management/features/engine/self-hosted-engine/">Features/Self_Hosted_Engine</a></p>

<h1 id="faq"><strong>FAQ</strong></h1>

<h3 id="what-is-the-expected-downtime-in-case-of-datacenter--host--vm-failure">What is the expected downtime in case of Datacenter / Host / VM failure?</h3>

<p>The VM should be up and running in less than 5 minutes if everything works properly. We did test three scenarios with four hosts:</p>

<ol>
  <li>Kill (forced poweroff) of host A at time T
    <ul>
      <li>T + 2 minutes - other hosts noticed and tried to start the VM (EngineStarting state)</li>
      <li>T + 3 minutes - the engine VM started responding to pings</li>
      <li>T + 5 minutes - EngineUp (good health)</li>
    </ul>
  </li>
  <li>Complete forced poweroff of the whole cluster, first machine booting kernel at time T
    <ul>
      <li>T + 3 minutes - EngineStarting on the first host</li>
      <li>T + 5 minutes - engine VM responding to pings</li>
    </ul>
  </li>
  <li>Engine VM killed with kill -9
    <ul>
      <li>T + 0 minutes (matter of seconds) - EngineStarting on other hosts</li>
      <li>T + 1 minute - engine VM responding to pings</li>
    </ul>
  </li>
</ol>

<p>The measured times assume the network is fine and the VM either crashed or responded to the shutdown command. There is 5 minute grace period when the VM is still running but the ovirt-engine is not responding. It can also take additional five minutes to stop the engine VM when it gets stuck and then additional five minutes to start it (if the engine is not Up after 5 minutes, we kill it and try elsewhere).</p>

<h3 id="engineunexpectedlydown">EngineUnexpectedlyDown</h3>

<h4 id="failed-to-acquire-lock">Failed to acquire lock</h4>

<p>When the hosted engine VM is down for some reason the agent(s) will try to start it again. There is no synchronization between agents while starting the VM, so it might happen that more than one agent will try to start the VM at the same time. This is intended behavior because only one host can actually acquire the lock and run the VM. The host which failed the acquire the log will print an error to the vdsm.log: 'Failed to acquire lock: error -243'. The agent will move to the EngineUnexpectedlyDown state, because it failed to start the VM, but it will sync in a while once the timeout expires (you can grep the agent.log for "Timeout" to get the specific time when it should sync).</p>

<h3 id="recoving-from-failed-install">Recoving from failed install</h3>

<p>If your hosted engine install fails, you have to manually clean up before you can reinstall. Exactly what needs to be done depends on how far the install got before failing. Here are the steps I've used, base on this <a href="http://lists.ovirt.org/pipermail/users/2014-May/024423.html">thread from the mailing list</a>:</p>

<ul>
  <li>
    <p>clean up hosted engine storage. This will vary depending on your storage setup. I logged into my NFS server and purged the directory used during the hoste-engine install.</p>

    <p># ls  /export/ovirt/hosted-engine
  <strong>DIRECT_IO_TEST</strong>  ce61789b-4291-47d6-a2a6-01263d6b4f5b
  # rm -fR /export/ovirt/hosted-engine/*</p>
  </li>
  <li>
    <p>clean up host files</p>
  </li>
</ul>

<!-- -->

<pre class="highlight shell"><code><span class="c">#!/bin/bash</span>&#x000A;&#x000A;<span class="nb">echo</span> <span class="s2">"stopping services"</span>&#x000A;service vdsmd stop 2&gt;/dev/null&#x000A;service supervdsmd stop 2&gt;/dev/null&#x000A;initctl stop libvirtd 2&gt;/dev/null&#x000A;&#x000A;<span class="nb">echo</span> <span class="s2">"removing packages"</span>&#x000A;yum remove <span class="se">\*</span>ovirt<span class="se">\*</span> <span class="se">\*</span>vdsm<span class="se">\*</span> <span class="se">\*</span>libvirt<span class="se">\*</span>&#x000A;&#x000A;rm -fR /etc/<span class="k">*</span>ovirt<span class="k">*</span> /etc/<span class="k">*</span>vdsm<span class="k">*</span> /etc/<span class="k">*</span>libvirt<span class="k">*</span> /etc/pki/vdsm&#x000A;&#x000A;<span class="nv">FILES</span><span class="o">=</span><span class="s2">" /etc/init/libvirtd.conf"</span>&#x000A;FILES+<span class="o">=</span><span class="s2">" /etc/libvirt/nwfilter/vdsm-no-mac-spoofing.xml"</span>&#x000A;FILES+<span class="o">=</span><span class="s2">" /etc/ovirt-hosted-engine/answers.conf"</span>&#x000A;FILES+<span class="o">=</span><span class="s2">" etc/vdsm/vdsm.conf"</span>&#x000A;FILES+<span class="o">=</span><span class="s2">" etc/pki/vdsm/*/*.pem"</span>&#x000A;FILES+<span class="o">=</span><span class="s2">" etc/pki/CA/cacert.pem"</span>&#x000A;FILES+<span class="o">=</span><span class="s2">" etc/pki/libvirt/*.pem"</span>&#x000A;FILES+<span class="o">=</span><span class="s2">" etc/pki/libvirt/private/*.pem"</span>&#x000A;<span class="k">for </span>f <span class="k">in</span> <span class="nv">$FILES</span>&#x000A;<span class="k">do</span>&#x000A;   <span class="o">[</span> ! -e <span class="nv">$f</span> <span class="o">]</span> <span class="o">&amp;&amp;</span> <span class="nb">echo</span> <span class="s2">"? </span><span class="nv">$f</span><span class="s2"> already missing"</span> <span class="o">&amp;&amp;</span> <span class="k">continue&#x000A;   </span><span class="nb">echo</span> <span class="s2">"- removing </span><span class="nv">$f</span><span class="s2">"</span>&#x000A;   rm -f <span class="nv">$f</span> <span class="o">&amp;&amp;</span> <span class="k">continue&#x000A;   </span><span class="nb">echo</span> <span class="s2">"! error removing </span><span class="nv">$f</span><span class="s2">"</span>&#x000A;   <span class="nb">exit </span>1&#x000A;<span class="k">done&#x000A;&#x000A;</span><span class="nv">DIRS</span><span class="o">=</span><span class="s2">"/etc/ovirt-hosted-engine /var/lib/libvirt/ /var/lib/vdsm/ /var/lib/ovirt-hosted-engine-* /var/log/ovirt-hosted-engine-setup/ /var/cache/libvirt/"</span>&#x000A;<span class="k">for </span>d <span class="k">in</span> <span class="nv">$DIRS</span>&#x000A;<span class="k">do</span>&#x000A;   <span class="o">[</span> ! -d <span class="nv">$f</span> <span class="o">]</span> <span class="o">&amp;&amp;</span> <span class="nb">echo</span> <span class="s2">"? </span><span class="nv">$d</span><span class="s2"> already missing"</span> <span class="o">&amp;&amp;</span> <span class="k">continue&#x000A;   </span><span class="nb">echo</span> <span class="s2">"- removing </span><span class="nv">$d</span><span class="s2">"</span>&#x000A;   rm -fR <span class="nv">$d</span> <span class="o">&amp;&amp;</span> <span class="k">continue&#x000A;   </span><span class="nb">echo</span> <span class="s2">"! error removing </span><span class="nv">$d</span><span class="s2">"</span>&#x000A;   <span class="nb">exit </span>1&#x000A;<span class="k">done</span>&#x000A;</code></pre>

<category:sla>
</category:sla>

</section>
</section>
</section>
<footer class='text-center' id='footer'>
<hr class='visible-print'>
<ul class='footer-nav-list'>
<li><a target="_blank" href="/privacy/">Privacy policy</a></li>
<li><a target="_blank" href="/about/">About</a></li>
<li><a target="_blank" href="/disclaimers/">Disclaimers</a></li>
</ul>

&copy; 2013&ndash;2016 oVirt
<div class='edit-this-page'>
<a target="_blank" href="https://github.com/oVirt/ovirt-site/edit/master/source/documentation/how-to/hosted-engine.html.md"><i class="icon fa fa-pencil"></i>Edit this page on GitHub</a>
</div>
<div class='last-modified'>
Page last modified
Wed 20 Apr 2016 20:54 UTC
</div>
</footer>


<script src="/javascripts/application.js" type="text/javascript"></script>

<!-- eloqua -->
<script src='//www.redhat.com/j/elqNow/elqCfg.js' type='text/javascript'></script>
<script src='//www.redhat.com/j/elqNow/elqImg.js' type='text/javascript'></script>

</body>
</html>
